<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.mapper.BankPrSaveMapper">
		 
	
	<select id="selectBankPrSaveList" resultType="BankPrSave" parameterType="BankPrSave">	
	     select 
			t.pr_save_id as prSaveId,
			t.type_id as typeId,
			t.card_id as cardId,
			a.rights_type_name as typeName
		 from Bank_Pr_Save t 
		 left join bank_pr_rights_type a on t.type_id=a.rights_type_code
		 where 1=1
		 <if test="typeId!=null and typeId!=''">
			  and  t.type_id=#{typeId,jdbcType=VARCHAR}                   
		 </if>
	</select>
	<select id="getCount" resultType="int" parameterType="BankPrSave">
	      select 
			count(1)
		 from Bank_Pr_Save t 
		 left join bank_pr_rights_type a on t.type_id=a.rights_type_code
		 where 1=1
		 <if test="typeId!=null and typeId!=''">
			  and  t.type_id=#{typeId,jdbcType=VARCHAR}                   
		 </if>
	</select> 
	<select id="infoBankPrSaveById" parameterType="String" resultType="java.util.HashMap">
	   select 
		  a.rights_type_name, t.*
		from Bank_Pr_Save t 
		left join bank_pr_rights_type a on t.type_id=a.rights_type_code
		where t.pr_save_id=#{prSaveId,jdbcType=VARCHAR}
	</select>
	<select id="selectFiledNameById" parameterType="String" resultType="java.util.HashMap">
	   select 
		 t.filed_id,
		 t.filed_name,
		 a.filed_abc_name
	   from 
	   bank_pr_filed_type t
	   left join bank_pr_rights_filed a on t.filed_id=a.filed_id
	   WHERE t.type_id=#{typeId,jdbcType=VARCHAR}
	    order by t.sort_no   
	 </select>
	 <delete id="delBankPrSave">
	     delete from Bank_Pr_Save b  
		 <where>
			b.pr_save_id  in
			<foreach collection="array" item="item" index="index" open="("
				separator="," close=")">#{item}</foreach>
		</where>
	 </delete>
	 
</mapper>