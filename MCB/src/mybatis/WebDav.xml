<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.mapper.WebDavMapper">
 
	<select id="selectWebDavList" resultType="com.app.entity.WebDav" parameterType="java.lang.String">
        select 
	      t.webdav_id as webDavId,
	      t.webdav_hostname as webDavHostName,
	      t.webdav_port as webDavPort,
	      t.webdav_username as webDavUserName,
	      t.webdav_password as webDavPassword,
	      t.webdav_url as webDavUrl,
	      t.webdav_num as webDavNum,
	      t.webdav_lookurl as webDavLookUrl,
	      t.webdav_isok as webDavIsOk
	    from bank_webdav t
		 
	</select> 
	<select id="selectWebDavCount"  resultType="int" parameterType="com.app.entity.WebDav">
        select 
		  count(1) as totalCount
		from bank_webdav t where t.webdav_id=#{webDavId,jdbcType=VARCHAR} 
	</select> 
	<select id="selectWebDavNumCount"  resultType="int" parameterType="com.app.entity.WebDav">
        select 
		  count(1) as totalCount
		from bank_webdav t where t.webdav_num=#{webDavNum,jdbcType=VARCHAR} 
	</select>
	
	<insert id="insertWebDav" parameterType="com.app.entity.WebDav">
	    insert into bank_webdav (webdav_id,webdav_hostname,webdav_port,webdav_username,webdav_password,webdav_url,webdav_num,webdav_lookurl,webdav_isok)
         values(#{webDavId,jdbcType=VARCHAR},#{webDavHostName,jdbcType=VARCHAR},#{webDavPort},#{webDavUserName,jdbcType=VARCHAR},
         #{webDavPassword,jdbcType=VARCHAR},#{webDavUrl,jdbcType=VARCHAR},#{webDavNum,jdbcType=VARCHAR},#{webDavLookUrl,jdbcType=VARCHAR},#{webDavIsOk,jdbcType=VARCHAR})
	</insert>
	
	<!-- 批量删除webDav信息 -->
	<delete id="deleteWebDav">
	    delete from bank_webdav
		<where>
			webdav_id  in
			<foreach collection="array" item="item" index="index" open="("
				separator="," close=")">#{item}</foreach>
		</where>
	</delete>
	   
	<update id="updateWebDav" parameterType="com.app.entity.WebDav">
	   update bank_webdav b set
		   b.webdav_hostname=#{webDavHostName,jdbcType=VARCHAR},
		   b.webdav_port=#{webDavPort},
		   b.webdav_username= #{webDavUserName,jdbcType=VARCHAR},
		   b.webdav_password=#{webDavPassword,jdbcType=VARCHAR},
		   b.webdav_url=#{webDavUrl,jdbcType=VARCHAR},
		   b.webdav_num=#{webDavNum,jdbcType=VARCHAR},
		   b.webdav_lookurl=#{webDavLookUrl,jdbcType=VARCHAR}
	   where b.webdav_id=#{webDavId,jdbcType=VARCHAR}
	</update>
	
	<select id="selectWebDavById" resultType="com.app.entity.WebDav" parameterType="java.lang.String">
        select 
		  t.webdav_id as webDavId,
		  t.webdav_hostname as webDavHostName,
		  t.webdav_port as webDavPort,
		  t.webdav_username as webDavUserName,
		  t.webdav_password as webDavPassword,
		  t.webdav_url as webDavUrl,
		  t.webdav_num as webDavNum,
		  t.webdav_lookurl as webDavLookUrl
		from bank_webdav t
		 
	    where t.webdav_id=#{webDavId,jdbcType=VARCHAR}  
	    
		 
	</select> 
	<select id="selectWebDavIsOk" resultType="com.app.entity.WebDav" parameterType="java.lang.String">
	   select 
		  t.webdav_id as webDavId,
	      t.webdav_hostname as webDavHostName,
	      t.webdav_port as webDavPort,
	      t.webdav_username as webDavUserName,
	      t.webdav_password as webDavPassword,
	      t.webdav_url as webDavUrl,
	      t.webdav_num as webDavNum,
	      t.webdav_lookurl as webDavLookUrl
       from bank_webdav t
       where t.webdav_isok='1'
	</select>
	<update id="updateWebDavIsOk" parameterType="String">
	   UPDATE bank_webdav t SET t.WEBDAV_ISOK = '1' WHERE t.webdav_id=#{webDavId,jdbcType=VARCHAR}  
	</update>
	<update id="updateWebDavIsNo" parameterType="String">
	   UPDATE bank_webdav t SET t.WEBDAV_ISOK = '2' WHERE t.webdav_id=#{webDavId,jdbcType=VARCHAR}  
	</update>
	 <select id="selectControlLog"  parameterType="java.util.HashMap" resultType="int" >
	     select 
	     count(1) 
	     from BANK_CONTROL_LOG t 
	     where t.control_act='FIVE' and t.control_cause_no=#{controlCauseNo,jdbcType=VARCHAR}  and Substr(t.control_date,0,10)=#{controlDay,jdbcType=VARCHAR}
	 </select>
	 <insert id="insertBankControlLog" parameterType="java.util.HashMap">
	    insert into BANK_CONTROL_LOG
		  (CONTROL_ID,
		  CONTROL_IS_OK,
		  CONTROL_CAUSE_NO,
		  CONTROL_DATE,
		  CONTROL_TIME)
		VALUES
		  (SEQ_BK_CONTROL_LOG.NEXTVAL||(select to_char(sysdate,'YYYYMMDDHH24MISS') from dual),
		  #{controlIsOk,jdbcType=VARCHAR},
		  '6',
		  #{controlDate,jdbcType=VARCHAR},
		  #{controlTime,jdbcType=VARCHAR})
	</insert>
	<update id="updateBankControlLog" parameterType="java.util.HashMap">
	    update BANK_CONTROL_LOG t 
	    set t.control_cause=#{controlCause,jdbcType=VARCHAR},
	    t.control_date=#{controlDate,jdbcType=VARCHAR}
	    where t.control_act='FIVE' 
	    and t.control_cause_no=#{controlCauseNo,jdbcType=VARCHAR}  
	    and Substr(t.control_date,0,10)=#{controlDay,jdbcType=VARCHAR}
	</update>
</mapper>