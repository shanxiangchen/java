<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.mapper.ShopPhotoMapper">

 	 <resultMap type="ShopPhoto" id="shopphotoAndRoleResultMap">
			<id column="photo_album_id" property="photoalbumid" />
			<result column="photo_url" property="photourl" />
			<result column="photo_name" property="photoname" />
			<result column="photo_flag" property="photoflag" />
			<result column="odds_shop_id" property="oddsshopid" />
	</resultMap> 

	<select id="findAllShopPhoto" resultType="ShopPhoto" resultMap="shopphotoAndRoleResultMap">
  		SELECT u.photo_album_id,u.photo_url,u.photo_name,u.photo_flag,u.odds_shop_id from bank_odds_shop_photo_album u
    where   u.photo_flag=1 
	</select>
	
	<insert id="insertShopPhoto" useGeneratedKeys="true" parameterType="ShopPhoto"
		keyProperty="oddsshopid">
		INSERT INTO
		bank_odds_shop_photo_album(photo_url,photo_name,photo_flag,odds_shop_id)
		VALUES(#{photourl,jdbcType=VARCHAR},#{photoname,jdbcType=VARCHAR},#{photoflag},#{oddsshopid,jdbcType=VARCHAR})
	</insert>
	
	 
	<delete id="deleteshopshoto" parameterType="String">
		delete from bank_odds_shop_photo_album where odds_shop_id=#{oddsshopid,jdbcType=VARCHAR}
	</delete>
	<!--删除服务器上图片和数据信息 -->
	<select id="selectAlbumbId" resultMap="shopphotoAndRoleResultMap" parameterType="String">
		select * from  bank_odds_shop_photo_album where photo_album_id=#{oddsshopid}
	</select>
	<delete id="delAlbumbId" parameterType="String">
		delete from bank_odds_shop_photo_album where photo_album_id=#{photoalbumid}
	</delete>
	
	
	<update id="updateShopPhoto" parameterType="ShopPhoto" >
	update bank_odds_shop_photo_album set 
		photo_url=#{photourl,jdbcType=VARCHAR},
		photo_name=#{photoname,jdbcType=VARCHAR}
		where photo_album_id=#{photoalbumid}
	</update>
	<!-- 查询其他图片信息 -->
	<select id="oddsShopIdByid"  resultMap="shopphotoAndRoleResultMap" parameterType="String">
		select * from  bank_odds_shop_photo_album where ODDS_shop_id=#{oddsshopid}
	</select>
		<!-- 查询其他图片信息 -->
	<select id="photoalbumidByid"  resultMap="shopphotoAndRoleResultMap" parameterType="int">
		select * from  bank_odds_shop_photo_album where photo_album_id=#{photoalbumid}
	</select>
	<delete id="deleteShopPhoto" parameterType="String">
		delete from bank_odds_shop_photo_album where photo_album_id=#{photoalbumid}
	</delete>
</mapper>



