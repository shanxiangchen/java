<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.mapper.ErrorCodeMapper">
<resultMap type="com.app.entity.ErrorCode" id="ErrorCoderesultMap">
		<id column="error_code_id"  property="errorCodeId"></id>
		<result column="error_code_type"  property="errorCodeType"></result>
		<result column="error_encoding"  property="errorEncoding"></result>
		<result column="error_describe"  property="errorDescribe"></result>
	</resultMap>
	<sql id="errorCodeColumns">error_code_type,error_encoding,error_describe</sql>
	<select id="listPageErrorCode" parameterType ="com.app.entity.ErrorCode" resultMap="ErrorCoderesultMap">
	    SELECT  e.* FROM bank_error_code e WHERE 1=1
		<if test="errorCodeType!=null and errorCodeType!=''">
		 	and error_code_type = #{errorCodeType}
		</if>
		<if test="errorEncoding!=null and errorEncoding!=''">
			and error_encoding like '%${errorEncoding}%'
		</if>
		ORDER BY error_code_id DESC
	</select>
	 
	<insert id="insertErrorCode" parameterType="com.app.entity.ErrorCode" useGeneratedKeys="false" keyProperty="errorCodeId">
			insert into  bank_error_code (<include refid="errorCodeColumns"/>)
		 	values (#{errorCodeType},#{errorEncoding},#{errorDescribe})
	</insert>
	<delete id="deleteErrorCode" parameterType="int">
		delete from bank_error_code where error_code_id=#{errorCodeId}
	</delete>
		<select id="getErrorCodeById"  parameterType="int"  resultMap="ErrorCoderesultMap">
		SELECT * FROM bank_error_code WHERE error_code_id=#{errorCodeId}
	</select>
	<update id="updaterrorCodeInfo" parameterType="com.app.entity.ErrorCode">
		update bank_error_code set
		error_code_type=#{errorCodeType},
		error_encoding=#{errorEncoding},
		error_describe=#{errorDescribe}
		where  error_code_id = #{errorCodeId}
	</update>
</mapper>