<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.mapper.BankPrCalendarMapper">
		 
	
	<select id="selectCalendarPageList" resultType="BankPrCalendar" parameterType="BankPrCalendar">	
	    select 
		 t.calendar_id as calendarId,
		 t.calendar_type as calendarType,
		 t.calendar_year as calendarYear,
		 t.calendar_begin_date as calendarBeginDate,
		 t.calendar_end_date as calendarEndDate
		from bank_pr_calendar t
		where 1=1
		<if test="calendarYear!=null and calendarYear!=''">
			and calendar_year=#{calendarYear}
		</if>
	</select>
	<insert id="insertBankPrCalendar" parameterType="BankPrCalendar">
		insert into bank_pr_calendar
		( 
		 calendar_type,
		 calendar_year,
		 calendar_begin_date,
		 calendar_end_date)
		values(
		  #{calendarType,jdbcType=VARCHAR},
		  #{calendarYear,jdbcType=VARCHAR},
		  #{calendarBeginDate,jdbcType=VARCHAR},
		  #{calendarEndDate,jdbcType=VARCHAR}
		)
    </insert>
    <select id="selectCountExists" resultType="int" parameterType="BankPrCalendar">
        select count(1) from bank_pr_calendar t
		where t.calendar_year=#{calendarYear,jdbcType=VARCHAR} and t.calendar_type=#{calendarType,jdbcType=VARCHAR}
		and t.calendar_type!='GZR'
    </select>
    
    <delete id="delCalendar">
	    delete from bank_pr_calendar  
		<where>
			 calendar_id  in
			<foreach collection="array" item="item" index="index" open="("
				separator="," close=")">#{item}</foreach>
		</where>
	 
	</delete>
	<select id="selectCalendarById" resultType="BankPrCalendar" parameterType="String">
	    select 
		 t.calendar_id as calendarId,
		 t.calendar_type as calendarType,
		 t.calendar_year as calendarYear,
		 t.calendar_begin_date as calendarBeginDate,
		 t.calendar_end_date as calendarEndDate
		from bank_pr_calendar t
		where t.calendar_id=#{calendarId,jdbcType=VARCHAR}
	</select>
	<update id="updateCalendar"  parameterType="BankPrCalendar">
	    update bank_pr_calendar t set 
	    t.calendar_year=#{calendarYear,jdbcType=VARCHAR},
	    t.calendar_begin_date=#{calendarBeginDate,jdbcType=VARCHAR},
	    t.calendar_end_date=#{calendarEndDate,jdbcType=VARCHAR}
	    where t.calendar_id=#{calendarId,jdbcType=VARCHAR}
	</update>
</mapper>