<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.mapper.StagingListMapper">
	<resultMap type="StagingList" id="StagingListResultMap">
			<id column="SPEEDY_LIST"  property="speedyList" />
			<result column="CITY"  property="city" />
			<result column="NAME" property="name"/>
			<result column="PHONE" property="phone"/>
			<result column="CREDIT_CARD_LIMIT" property="creditCardLimit"/>
			<result column="NO_MORTGAGE_LARGE_STAGING" property="noMortgageLargeStaging"/>
			<result column="NO_MORTGAGE_CAR_STAGING" property="noMortgageCarStaging"/>
			<result column="NO_MORTGAGE_DIRECT_STAGING" property="noMortgageDirectStaging"/>
			<result column="MORTGAGE_CAR_STAGING" property="mortgageCarStaging"/>
			<result column="MORTGAGE_DIRECT_STAGING" property="mortgageDirectStaging"/>
			<result column="EXPIRY_DATE" property="expiryDate"/>
			<result column="CITY_NAME"  property="cityName" />
			
			
	</resultMap>
	<select id="stagingListPageList" resultMap="StagingListResultMap" parameterType="StagingList">
			select e.* from bank_speedy_list e  where 1=1
		 <if test="name!=null and name!=''">
			and name like "%"#{name}"%"
		</if> 	
	</select>
	<insert id="insertStagingList" parameterType="StagingList">
	insert into bank_speedy_list 
	(CITY,NAME,PHONE,CREDIT_CARD_LIMIT,NO_MORTGAGE_LARGE_STAGING,NO_MORTGAGE_CAR_STAGING,NO_MORTGAGE_DIRECT_STAGING,MORTGAGE_CAR_STAGING,MORTGAGE_DIRECT_STAGING,EXPIRY_DATE) 
	values
	(
	#{speedyList},#{city},#{name},#{phone},#{creditCardLimit},
	#{noMortgageLargeStaging},#{noMortgageLargeStaging},#{noMortgageDirectStaging},
	#{mortgageCarStaging},#{mortgageDirectStaging},#{expiryDate})
	</insert>
	
	<delete id="delectStagingList" >
		delete from bank_speedy_list
		<where>
			SPEEDY_LIST  in
			<foreach collection="array" item="item" index="index" open="("
				separator="," close=")">#{item}</foreach>
		</where>
	</delete>
		<select id="getStagingListbyid" parameterType="StagingList" resultType="String">
			SELECT COUNT(1) FROM bank_speedy_list where 1=1
	</select>
	<select id="getStangeListNum" parameterType="StagingList" resultType="int">
			select count(speedy_list) from bank_speedy_list where phone=#{phone}
	</select>
	
	<delete id="deleteAllStaging">
		 TRUNCATE TABLE bank_speedy_list
	</delete>
	<!-- <select id="sqlstagingList" statementType="CALLABLE">
		<![CDATA[{
		call sqlstagingList(#{lineText,mode=IN,jdbcType=VARCHAR},#{flag,mode=OUT,jdbcType=VARCHAR})
		}]]>
	</select> -->
</mapper>