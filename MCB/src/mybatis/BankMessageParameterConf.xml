<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.mapper.BankMessagePCMapper">

<resultMap type="BankMessageParameterConf" id="messageParameterConfResultMap">
		<id column="bmpc_id" property="bmpcId"></id>
		<result column="bmpc_coding" property="bmpcCode"></result>
		<result column="bmpc_url" property="bmpcUrl"></result>
		<result column="bmpc_name" property="bmpcName"></result>
		<result column="value" property="bmpcType"></result>
	</resultMap>
	
	<select id="selectMessageParameterConfPageList" resultType="com.app.entity.BankMessageParameterConf" parameterType="com.app.entity.BankMessageParameterConf">
		select 
			pc.bmpc_id as bmpcId ,bmpc_coding as bmpcCode ,
			bmpc_url as bmpcUrl ,bmpc_name as bmpcName,
			value as bmpcType,mt.type_name as bmpcTypeName
			from bank_message_parameter_configuration pc,bank_message_type mt
			where 
				pc.value = mt.type_no
			<if test="bmpcId != null and bmpcId != '' ">
				and bmpc_id = #{bmpcId}
			</if>
			<if test="bmpcCode != null and bmpcCode != ''">
				and bmpc_coding =#{bmpcCode}
			</if>
	</select>
	
	<select id="selMessageParameterConfById" resultType="com.app.entity.BankMessageParameterConf" parameterType="String">
		SELECT bmpc.bmpc_id as bmpcId,bmpc.bmpc_coding as bmpcCode,
			bmpc.bmpc_url as bmpcUrl,bmpc.bmpc_name as bmpcName,
			bmpc.value as bmpcType FROM bank_message_parameter_configuration bmpc
			where 1=1 and bmpc.bmpc_id=#{bmpcId}
	</select>

	
	<select id="selectCount" parameterType="BankMessageParameterConf" resultType="int">
		select count(*)
			from bank_message_parameter_configuration
		<where>
			<if test="bmpcId != null and bmpcId != '' ">
				and bmpc_id = #{bmpcId}
			</if>
			<if test="bmpcCode != null and bmpcCode != ''">
				and bmpc_coding =#{bmpcCode}
			</if>
		</where>
	</select>
	
	<select id="selBankMessageType" resultType="com.app.entity.BankMessageType">
		SELECT bmt.TYPE_NO AS  typeNo ,bmt.TYPE_NAME AS  typeName FROM  bank_message_type  bmt
	</select>
	
	
	<update id="updateMessageParameterConf" parameterType="com.app.entity.BankMessageParameterConf">
		update bank_message_parameter_configuration set 
			bmpc_url=#{bmpcUrl},bmpc_name=#{bmpcName}
		where bmpc_id =#{bmpcId}
	</update>
	
	<insert id="insertMessageParameterConf" parameterType="BankMessageParameterConf">
		insert into bank_message_parameter_configuration(bmpc_coding,bmpc_url,bmpc_name,value )
		values(#{bmpcCode},#{bmpcUrl},#{bmpcName},#{bmpcType})
	</insert>
</mapper>
