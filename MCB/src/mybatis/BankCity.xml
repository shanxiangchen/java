<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.mapper.BankCtyMapper">
	<resultMap type="com.app.entity.BankCity" id="bankCityresultMap">
		<id column="city_id" property="cityId"></id>
		<result column="city_no" property="cityNo"></result>
		<result column="city_name" property="cityName"></result>
		<result column="city_parent_no" property="cityParentNo"></result>
		<result column="city_administration" property="cityAdministration"></result>
	</resultMap>


	<sql id="insertBanlCity">city_no,city_name,city_parent_no,city_administration
	</sql>
	<select id="listPageBankCty" parameterType="com.app.entity.BankCity"
		resultMap="bankCityresultMap">
		SELECT * FROM bank_city e WHERE 1=1
		<if test="cityName!=null and cityName!=''">
			and city_name like '%${cityName}%'
		</if>
		<if test="cityNo!=null and cityNo!=''">
			and city_no like '%${cityNo}%'
		</if>
		ORDER BY CITY_ID DESC
	</select>
  
	<delete id="deleteBankCityInfo" parameterType="int">
		delete from bank_city where city_id=#{cityId}
	</delete>
	<!-- 判断是否唯一 -->
	<select id="getCountNewNo" parameterType="com.app.entity.BankCity"
		resultType="Integer">
		select count(city_id) from bank_city where
		city_no=#{cityNo}
	</select>
	<insert id="insertBankCity" parameterType="com.app.entity.BankCity" keyProperty="cityId">
		insert into bank_city(city_no,city_name,city_parent_no,city_administration)
		values(#{cityNo},#{cityName},#{cityParentNo},#{cityAdministration})
	</insert>
	<select id="getBankCityById" parameterType="int" resultMap="bankCityresultMap">
		select * from bank_city where city_id=#{cityId}
	</select>

	<update id="updateBankCity" parameterType="com.app.entity.BankCity">
		update bank_city set
		city_name=#{cityName}
		where city_id=#{cityId}
	</update>
	<select id="findAllCity" resultMap="bankCityresultMap">
		select
		t.city_no,
		t.city_name
		from bank_city t
		where t.city_administration='市'
		 order by   nlssort(t.city_name,'NLS_SORT=SCHINESE_PINYIN_M') 
	</select>
	<select id="getBankCityByCode" parameterType="String" resultMap="bankCityresultMap">
		select city_no,city_name from bank_city where city_no = #{cityNo}
	</select>
</mapper>