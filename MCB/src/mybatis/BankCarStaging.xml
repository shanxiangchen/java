<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.mapper.BankCarStagingMapper">
	<resultMap type="bankCarStaging" id="bankCarStagingResultMap">
		<id column="CAR_STAGING_ID" property="carStagingId" />
		<result column="CAR_STAGING_CITY" property="carStagingCity" />
		<result column="CAR_STAGING_BRAND" property="carStagingBrand" />
		<result column="MARKETING_NAME" property="marketingName" />
		<result column="CAR_STAGING_LOCATION" property="carStagingLocation" />
		<result column="CAR_STAGING_PHONE" property="carStagingPhone" />
		<result column="CAR_STAGING_CITY_CODE" property="carStagingCityCode" />
	</resultMap>
	<select id="selbankCarStagingPageList" resultMap="bankCarStagingResultMap"
		parameterType="BankCarStaging">
		select t.car_staging_id,
		t.car_staging_city,
		t.car_staging_brand,
		t.marketing_name,
		t.car_staging_location,
		t.car_staging_phone,
		t.car_staging_city_code
		from bank_car_staging t where 1=1
		<if test="carStagingCity!=null and carStagingCity!=''">
			and t.car_staging_city like concat('%',#{carStagingCity},'%')
		</if>
	</select>
	
	<select id="expCarStaging" resultMap="bankCarStagingResultMap"
		parameterType="bankCarStaging">
		select * from bank_car_staging where 1=1
		<if test="carStagingCity!=null and carStagingCity!=''">
			and CAR_STAGING_CITY like concat('%',#{carStagingCity},'%')
		</if>
	</select>

	<select id="selectStoreNoList" resultType="int" parameterType="String">
		select count(1) from bank_car_staging b where
		b.CAR_STAGING_CITY_CODE=#{carStagingCityCode}
	</select>
	<delete id="delCarStaging" parameterType="String">
		delete from
		bank_car_staging where
		CAR_STAGING_CITY_CODE=#{carStagingCityCode}
	</delete>
	<select id="getBankCarStagingCityByCode" parameterType="BankCarStaging" resultType="int" >
		select count(1) from bank_car_staging_city where car_staging_city_code=#{carStagingCityCode}
	</select>
	<select id="getBankCarStagingId" parameterType="BankCarStaging" resultMap="bankCarStagingResultMap">
		select car_staging_id from bank_car_staging where CAR_STAGING_CITY_CODE = #{carStagingCityCode}
		and CAR_STAGING_BRAND = #{carStagingBrand} and MARKETING_NAME = #{marketingName}
	</select>
	
	<delete id="deleteBankCarStagingById" parameterType="int">
		delete from bank_car_staging where car_staging_id = #{carStagingId}
	</delete>
	<select id="getBankCarStagingByCode" parameterType="BankCarStaging" resultType="int">
		select count(*) from bank_car_staging where car_staging_city_code = #{carStagingCityCode}
	</select>
	<delete id="deleteBankCarStagingByCode" parameterType="String">
		delete from bank_car_staging where car_staging_city_code=#{carStagingCityCode}
	</delete>
	<select id="getBankcarStagingNum" parameterType="BankCarStaging" resultType="int">
		select count(1) from bank_car_staging where car_staging_city_code=#{carStagingCityCode} 
		and car_staging_phone = #{carStagingPhone} and marketing_name=#{marketingName} and car_staging_brand=#{carStagingBrand}
	</select>
</mapper>