<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.mapper.CardInfoMapper">
	<resultMap type="CardInfo" id="CardInfoResultMap">
		<id column="CARD_ID" property="cardId" />
		<result column="CARD_NAME" property="cardNmae" />
		<result column="CARD_INFO" property="cardinfo" />
		<result column="CARD_TYPE" property="cardType" />
		<result column="CARD_PIC_URL" property="cardPicUrl" />
		<result column="CARD_PIC_NAME" property="cardPicName" />
		<result column="CARD_NUM" property="cardNum" />
		<result column="CARD_FLAG" property="cardFlag" />
		<result column="CARD_IS_ADD" property="cardIsAdd" />
	</resultMap>

	<resultMap type="com.app.entity.BankCodeInfo" id="BankCardInfoResultMap">
		<result column="VALUE" property="value" />
		<result column="content" property="content" />
	</resultMap>

	<select id="cardInfoPageList" resultMap="CardInfoResultMap"
		parameterType="CardInfo">
		select b.card_id,b.card_num,b.card_name,b.card_info,c.content as
		card_type,b.card_pic_url
		from bank_card_info b
		left join bank_code_info c
		on b.card_type = c.value left join bank_code_type t on
		c.code_type_id=t.code_type_id where 1=1 and c.code_type_id='card_type'
		<if test="cardNmae!=null and cardNmae!=''">
			and b.card_name like '%${cardNmae}%'
		</if>
		ORDER BY b.card_id DESC
	</select>
	<!-- 数据字典 -->
	<select id="listBankCodeInfo" resultMap="BankCardInfoResultMap">
		select b.value as VALUE ,b.content as CONTENT from bank_code_type t left
		join bank_code_info b
		on t.code_type_id=b.code_type_id where t.code_type_id='card_type' order
		by value asc
	</select>

	<insert id="insertCardInfo" parameterType="CardInfo">
		insert into bank_card_info i
		(i.card_num,i.card_name,i.card_info,i.card_type,i.card_pic_url,i.card_pic_name,i.card_flag,i.card_is_add)
		values(#{cardNum,jdbcType=VARCHAR},#{cardNmae,jdbcType=VARCHAR},#{cardinfo,jdbcType=VARCHAR},#{cardType,jdbcType=VARCHAR},#{cardPicUrl,jdbcType=VARCHAR},#{cardPicName,jdbcType=VARCHAR},1,#{cardIsAdd,jdbcType=VARCHAR})
	</insert>
	<select id="listCardInfoById" resultMap="CardInfoResultMap"
		parameterType="int">
		select * from bank_card_info where CARD_ID = #{cardId}
	</select>
	<select id="listCardInfoByIds" resultMap="CardInfoResultMap"
		parameterType="int">
		select * from bank_card_info where CARD_ID = #{cardId}
	</select>


	<update id="editCardInfo" parameterType="CardInfo">
		update bank_card_info
		set
		CARD_NAME=#{cardNmae,jdbcType=VARCHAR},CARD_INFO=#{cardinfo,jdbcType=VARCHAR},CARD_TYPE=#{cardType,jdbcType=VARCHAR},
		CARD_PIC_URL=#{cardPicUrl,jdbcType=VARCHAR},CARD_IS_ADD=#{cardIsAdd,jdbcType=VARCHAR}
		where CARD_ID=#{cardId}
	</update>

	<update id="editCardInfos" parameterType="CardInfo">
		update bank_card_info
		set
		CARD_NAME=#{cardNmae,jdbcType=VARCHAR},CARD_INFO=#{cardinfo,jdbcType=VARCHAR},CARD_TYPE=#{cardType,jdbcType=VARCHAR},
		CARD_IS_ADD=#{cardIsAdd,jdbcType=VARCHAR} where CARD_ID=#{cardId}
	</update>

	<delete id="delCardInfo" parameterType="int">
		delete from
		bank_card_info where CARD_ID=#{cardId}
	</delete>
</mapper>