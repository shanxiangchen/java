<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.mapper.InforMationMapper">
	<resultMap type="InforMation" id="InforMationResultMap">
		<id column="CUST_ID" property="custId" />
		<result column="CUST_NAME" property="custName" />
		<result column="CUST_NAME_ABC" property="custNameAbc" />
		<result column="CUST_SEX" property="custSex" />
		<result column="CUST_EMAIL" property="custEmail" />
		<result column="CUST_ISMARRY" property="custIsmarry" />
		<result column="CUST_EDUCATION" property="custEducation" />
		<result column="CUST_NOW_ADDRESS" property="custNowAddress" />
		<result column="CUST_MORE_ADDRESS" property="custMoreAddress" />
		<result column="CUST_ZIP_CODE" property="custZipCode" />
		<result column="CUST_PHONE_NUM" property="custPhoneNum" />
		<result column="CUST_CARD_ID" property="custCardId" />
		<result column="CUST_WORK_UNIT" property="custWorkUnit" />
		<result column="CUST_UNIT_PHONE" property="custUnitPhone" />
		<result column="CUST_UNIT_ADDRESS" property="custUnitAddress" />
		<result column="CUST_UNIT_MORE_ADDRESS" property="custUnitMoreAddress" />
		<result column="CUST_UNTI_ZIPCODE" property="custUnitZipcode" />
		<result column="CUST_WORK_AGE" property="custWorkAge" />
		<result column="CUST_YEAR_MANEY" property="custYearManey" />
		<result column="CUST_UNIT_TYPE" property="custUnitType" />
		<result column="CUST_UNIT_DEPT" property="custUnitDept" />
		<result column="CUST_UNIT_POST" property="custUnitPost" />
		<result column="CUST_CAR_NUM" property="custCarNum" />
		<result column="CUST_CARD_ISOK" property="custCardIsok" />
		<result column="CUST_CARD_DATE" property="custCardDate" />
		<result column="CUST_IS_RECO" property="custIsReco" />
		<result column="CUST_RECO_ID" property="custRecoId" />
		<result column="CUST_IS_OTHER_CARD" property="custIsOtherCard" />
		<result column="CUST_OTHER_CARD_DATE" property="custOtherCardDate" />
		<result column="CUST_FAMILY_NAME" property="custFamilyName" />
		<result column="CUST_FAMILY_NEXUS" property="custFamilyNexus" />
		<result column="CUST_FAMILY_PHONE" property="custFamilyPhone" />

	</resultMap>
	<select id="listPageInforMation" resultMap="InforMationResultMap"
		parameterType="InforMation">
		SELECT * FROM (
		SELECT
		ROW_NUMBER() OVER(ORDER BY CUST_ID DESC ) no,
		t.cust_id,
		t.cust_name,
		t.cust_name_abc,
		t.cust_sex,
		t.cust_email,
		t.cust_ismarry,
		a.content as CUST_EDUCATION,
		t.cust_now_address,
		t.cust_more_address,
		t.cust_zip_code,
		t.cust_phone_num,
		t.cust_card_id,
		t.cust_work_unit,
		t.cust_unit_phone,
		t.cust_unit_address,
		t.cust_unit_more_address,
		t.cust_unti_zipcode,
		t.cust_work_age,
		t.cust_year_maney,
		b.content as CUST_UNIT_TYPE,
		t.cust_unit_dept,
		c.content as CUST_UNIT_POST,
		t.cust_car_num,
		t.cust_card_isok,
		t.cust_card_date,
		t.cust_is_reco,
		t.cust_reco_id,
		t.cust_is_other_card,
		t.cust_other_card_date,
		t.cust_family_name,
		t.cust_family_nexus,
		t.cust_family_phone
		from
		bank_cust_info t
		left join bank_code_info a on t.cust_education=a.value
		left join bank_code_info b on t.cust_unit_type=b.value
		left join bank_code_info c on t.cust_unit_post=c.value
		where a.code_type_id='EDUCATION_LEVEL' and b.code_type_id='UNIT_TYPE' and
		c.code_type_id='JOB_POST'
		<if test="custName!=null and custName!=''">
			and t.cust_name like '%'||#{custName}||'%'
		</if>
		<if test="custCardId!=null and custCardId!=''">
			and t.cust_card_id like '%'||#{custCardId}||'%'
		</if>

		) f WHERE f.no between (#{pageNo} -1) * #{pageSize} + 1 and (#{pageNo}
		* #{pageSize})


	</select>

	<select id="getCount" parameterType="InforMation" resultType="int">
		SELECT COUNT(1) FROM bank_cust_info where 1=1
	</select>

	<select id="getInforMationByid" parameterType="java.lang.String"
		resultMap="InforMationResultMap">
		select
		t.cust_id,
		t.cust_name,
		t.cust_name_abc,
		t.cust_sex,
		t.cust_email,
		t.cust_ismarry,
		a.content as CUST_EDUCATION,
		t.cust_now_address,
		t.cust_more_address,
		t.cust_zip_code,
		t.cust_phone_num,
		t.cust_card_id,
		t.cust_work_unit,
		t.cust_unit_phone,
		t.cust_unit_address,
		t.cust_unit_more_address,
		t.cust_unti_zipcode,
		t.cust_work_age,
		t.cust_year_maney,
		b.content as CUST_UNIT_TYPE,
		t.cust_unit_dept,
		c.content as CUST_UNIT_POST,
		t.cust_car_num,
		t.cust_card_isok,
		t.cust_card_date,
		t.cust_is_reco,
		t.cust_reco_id,
		t.cust_is_other_card,
		t.cust_other_card_date,
		t.cust_family_name,
		t.cust_family_nexus,
		t.cust_family_phone
		from bank_cust_info t
		left join bank_code_info a on t.cust_education=a.value
		left join bank_code_info b on t.cust_unit_type=b.value
		left join bank_code_info c on t.cust_unit_post=c.value
		where a.code_type_id='EDUCATION_LEVEL' and b.code_type_id='UNIT_TYPE'
		and c.code_type_id='JOB_POST' and t.cust_id=#{custId,jdbcType=VARCHAR}
	</select>


</mapper>