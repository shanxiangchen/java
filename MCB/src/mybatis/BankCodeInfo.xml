<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.mapper.BankCodeInfoMapper">
 
	 <select id="selectBankCodeInfoPageList" resultType="com.app.entity.BankCodeInfo" parameterType="com.app.entity.BankCodeInfo">
			 select 
				a.code_info_id as codeInfoId,
				a.code_type_id as codeTypeId,
				a.value as value,
				a.content as content,
				a.sort_no as sortNo,
				a.remark as remark,
				b.code_type_name as codeTypeName
			from 	
			bank_code_info a
			left join bank_code_type b on a.code_type_id=b.code_type_id
			where 1=1
			<if test="codeTypeId!=null and codeTypeId!=''">
			  and  a.code_type_id like concat('%',#{codeTypeId},'%')
		    </if>
		   
	</select> 
	 
	 <select id="selectBankCodeTypeList" resultType="com.app.entity.BankCodeType">
	    select 
		   t.code_type_id as codeTypeId,
		   t.code_type_name as codeTypeName,
		   t.sort_no as sortNo
		from 
		bank_code_type t
		  order by t.sort_no
	 </select> 
	 
	 <insert id="saveBankCodeInfo" parameterType="com.app.entity.BankCodeInfo">
	    insert into bank_code_info  (code_info_id,code_type_id,`value`,content,sort_no,remark) 
	    values(#{codeInfoId},#{codeTypeId,jdbcType=VARCHAR},#{value,jdbcType=VARCHAR},#{content,jdbcType=VARCHAR},#{sortNo,jdbcType=VARCHAR},#{remark,jdbcType=VARCHAR})
	</insert>
	
	<delete id="deleteCodeInfo">
	    delete from bank_code_info 
		<where>
			code_info_id  in
			<foreach collection="array" item="item" index="index" open="("
				separator="," close=")">#{item}</foreach>
		</where>
	 
	</delete>
	
	<select id="getBankCodeInfoById" parameterType="java.lang.String" resultType="com.app.entity.BankCodeInfo">
	   select 
	     a.code_info_id as codeInfoId,
		 a.code_type_id as codeTypeId,
		 a.value as value,
		 a.content as content,
		 a.sort_no as sortNo,
		 a.remark as remark
       from 
	   bank_code_info a
	   where a.code_info_id=#{codeInfoId,jdbcType=VARCHAR}
	
	</select>
	<update id="updateBankCodeInfo">
	   update bank_code_info a set
	    a.content=#{content},
	    a.remark=#{remark}
	   where a.code_info_id=#{codeInfoId,jdbcType=VARCHAR}
	</update>
	
	<select id="getCountByValue"  parameterType="java.util.HashMap" resultType="int">
	   select count(1) from bank_code_info a where a.value=#{value,jdbcType=VARCHAR} and a.code_type_id=#{codeTypeId,jdbcType=VARCHAR}
	
	</select>
	  
	 
</mapper>